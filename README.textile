h1. Stately.js

This repository is an expression of intent-to-build a state machine for evented javascript.

h2. A sketch

<pre><code>var stately = require ('stately')
  , sys = require ("sys")

machine = stately.define(function (s) {
  s.default ("off")

  s.states ("off", "neutral", "forward", "reverse", "stall")

  s.transitions (
    { off: "neutral"
    , neutral: [ "off", "forward", "reverse", "stall" ]
    , forward: [ "neutral", "stall" ]
    , reverse: [ "neutral", "stall" ]
    , stall: "off"
    })
    
  s.onTransition ('off', 'neutral', function () { sys.puts ("starting engine") })
  s.onTransition (null, 'stall', function () { sys.puts ("stalled out") })

  s.addListener ("illegalTransition", function (from, to) {
    sys.puts ("cannot transition from " + from + " to " + to + "!")
    s.transition ('stall')
  })

})
  
machine.start ()
machine.transition ('neutral') //=> stdout: 'starting engine'
machine.state //=> 'neutral'

machine.transition ('forward') //=> true
machine.transition ('reverse') //=> false, stdout: 'cannot transition from forward to reverse! \n stalled out'
machine.state //=> 'stall'
</code></pre>